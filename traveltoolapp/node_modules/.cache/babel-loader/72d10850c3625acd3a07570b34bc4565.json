{"ast":null,"code":"import _defineProperty from \"/home/ich/Documents/programming/Travel Helper - TRACE PROJECT 3/traveltool/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/home/ich/Documents/programming/Travel Helper - TRACE PROJECT 3/traveltool/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/ich/Documents/programming/Travel Helper - TRACE PROJECT 3/traveltool/src/components/CountryPage.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\n\nfunction CountryPage(props) {\n  const _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        country = _useState2[0],\n        setCountry = _useState2[1];\n\n  const _useState3 = useState(null),\n        _useState4 = _slicedToArray(_useState3, 2),\n        currency = _useState4[0],\n        setCurrency = _useState4[1];\n\n  const _useState5 = useState(0),\n        _useState6 = _slicedToArray(_useState5, 2),\n        convert = _useState6[0],\n        setConvert = _useState6[1];\n\n  const _useState7 = useState({\n    body: '',\n    name: ''\n  }),\n        _useState8 = _slicedToArray(_useState7, 2),\n        formData = _useState8[0],\n        setFormData = _useState8[1];\n\n  const _useState9 = useState('loading..'),\n        _useState10 = _slicedToArray(_useState9, 2),\n        commentsData = _useState10[0],\n        setCommentsData = _useState10[1];\n\n  useEffect(() => {\n    axios.get(\"https://restcountries.eu/rest/v2/name/\".concat(props.match.params.name)).then(countryResponse => {\n      const country = countryResponse.data[0];\n      setCountry(country);\n      displayComments();\n      axios.get(\"https://api.exchangeratesapi.io/latest?base=USD\").then(currencyResponse => {\n        setCurrency(currencyResponse.data.rates[country.currencies[0].code]);\n      });\n    }).catch(() => {\n      console.error(\"failure\");\n    });\n  }, [props.match.params.name]);\n\n  function handleChange(event) {\n    setConvert(event.target.value * currency);\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    axios.post(\"http://localhost:8000/comments/\", _objectSpread({}, formData, {\n      country: props.match.params.name\n    })).then(() => {\n      displayComments();\n    });\n  }\n\n  function displayComments() {\n    axios.get(\"http://localhost:8000/comments/?countryId=\".concat(props.match.params.name)).then(res => {\n      setCommentsData(res.data.map(item => {\n        return React.createElement(\"div\", {\n          className: \"container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 40\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"card\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 41\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"card-header\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42\n          },\n          __self: this\n        }, item.name), React.createElement(\"div\", {\n          className: \"card-body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45\n          },\n          __self: this\n        }, React.createElement(\"blockquote\", {\n          class: \"blockquote mb-0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        }, item.body)))));\n      }));\n    });\n  }\n\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, country ? React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, country.name), React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, \"$1 (USD) = \", currency, \" (\", country.currencies[0].code, \")\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, convert), React.createElement(\"form\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    className: \"form-control form-control-sm\",\n    placeholder: \"Name\",\n    type: \"text\",\n    value: formData.name,\n    onChange: e => setFormData(_objectSpread({}, formData, {\n      name: e.target.value\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    className: \"form-control form-control-sm\",\n    placeholder: \"Comment\",\n    type: \"text\",\n    value: formData.comment,\n    onChange: e => setFormData(_objectSpread({}, formData, {\n      body: e.target.value\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"Submit\",\n    name: \"Submit\",\n    className: \"btn btn-dark\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  })))) : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"loading\"), commentsData);\n}\n\nexport default CountryPage;","map":{"version":3,"sources":["/home/ich/Documents/programming/Travel Helper - TRACE PROJECT 3/traveltool/src/components/CountryPage.js"],"names":["React","useEffect","useState","axios","CountryPage","props","country","setCountry","currency","setCurrency","convert","setConvert","body","name","formData","setFormData","commentsData","setCommentsData","get","match","params","then","countryResponse","data","displayComments","currencyResponse","rates","currencies","code","catch","console","error","handleChange","event","target","value","handleSubmit","preventDefault","post","res","map","item","e","comment"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\n\nfunction CountryPage(props) {\n    const [country, setCountry] = useState(null);\n    const [currency, setCurrency] = useState(null);\n    const [convert, setConvert] = useState(0);\n    const [formData, setFormData] = useState({body: '', name: ''});\n    const [commentsData, setCommentsData] = useState('loading..');\n\n    useEffect(() => {        \n        axios.get(`https://restcountries.eu/rest/v2/name/${props.match.params.name}`).then(countryResponse => {\n            const country = countryResponse.data[0];\n            setCountry(country);\n            displayComments();\n            axios.get(`https://api.exchangeratesapi.io/latest?base=USD`).then(currencyResponse => {\n                setCurrency(currencyResponse.data.rates[country.currencies[0].code])\n            })\n        }).catch(() => {\n            console.error(\"failure\");\n        });\n    }, [props.match.params.name]);\n\n    function handleChange(event) {\n        setConvert(event.target.value * currency);\n    }\n    \n    function handleSubmit(event) {\n        event.preventDefault();\n        axios.post(`http://localhost:8000/comments/`, {...formData, country:props.match.params.name})\n            .then(() => {\n                displayComments();\n            });\n    }\n \n    function displayComments() { \n        axios.get(`http://localhost:8000/comments/?countryId=${props.match.params.name}`).then(res => {\n            setCommentsData(res.data.map((item => {\n                return (\n                    <div className=\"container\">\n                        <div className=\"card\">\n                            <div class=\"card-header\">\n                                {item.name}\n                            </div>\n                            <div className=\"card-body\">\n                                <blockquote class=\"blockquote mb-0\">\n                                <p>{item.body}</p>\n                                </blockquote>\n                            </div>\n                        </div>\n                    </div>\n                )\n            })));\n        });\n    }\n\n    return (\n        <React.Fragment>\n            {country ? \n            <div>\n            <h1>{country.name}</h1>\n            <h3>$1 (USD) = {currency} ({country.currencies[0].code})</h3>\n            <p>{convert}</p>\n            <form><input type=\"text\" onChange={handleChange}/></form>\n            {/*<img src={country.flag} alt={country.name} styles=\"max-width: 100px; max-height: 50px;\"></img>*/}\n\n            <div className=\"container\">\n            <form onSubmit={handleSubmit}>\n                <input className=\"form-control form-control-sm\" placeholder=\"Name\" type=\"text\" \n                value={formData.name} onChange={(e) => setFormData({...formData, name:e.target.value })}/>\n                <input className=\"form-control form-control-sm\" placeholder=\"Comment\" type=\"text\" \n                value={formData.comment} onChange={(e) => setFormData({...formData, body:e.target.value })}/>\n                <input type=\"Submit\" name=\"Submit\" className=\"btn btn-dark\"/>\n            </form>\n            </div>\n            </div> \n        \n            : <div>loading</div>}\n            {commentsData}\n        </React.Fragment>\n    );\n}\n\n\n\nexport default CountryPage;"]},"metadata":{},"sourceType":"module"}