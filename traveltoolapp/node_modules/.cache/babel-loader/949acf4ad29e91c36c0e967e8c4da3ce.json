{"ast":null,"code":"import _defineProperty from \"/home/ich/Documents/programming/Travel Helper - TRACE PROJECT 3/traveltool/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/home/ich/Documents/programming/Travel Helper - TRACE PROJECT 3/traveltool/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/ich/Documents/programming/Travel Helper - TRACE PROJECT 3/traveltool/src/components/CountryPage.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\n\nfunction CountryPage(props) {\n  const _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        country = _useState2[0],\n        setCountry = _useState2[1];\n\n  const _useState3 = useState(null),\n        _useState4 = _slicedToArray(_useState3, 2),\n        currency = _useState4[0],\n        setCurrency = _useState4[1];\n\n  const _useState5 = useState(0),\n        _useState6 = _slicedToArray(_useState5, 2),\n        convert = _useState6[0],\n        setConvert = _useState6[1];\n\n  const _useState7 = useState({\n    body: '',\n    name: ''\n  }),\n        _useState8 = _slicedToArray(_useState7, 2),\n        formData = _useState8[0],\n        setFormData = _useState8[1];\n\n  const _useState9 = useState('loading..'),\n        _useState10 = _slicedToArray(_useState9, 2),\n        commentsData = _useState10[0],\n        setCommentsData = _useState10[1];\n\n  const _useState11 = useState(''),\n        _useState12 = _slicedToArray(_useState11, 2),\n        time = _useState12[0],\n        setTime = _useState12[1];\n\n  useEffect(() => {\n    axios.get(\"https://restcountries.eu/rest/v2/name/\".concat(props.match.params.name)).then(countryResponse => {\n      const country = countryResponse.data[0];\n      setCountry(country);\n      displayComments();\n      makeTime(country);\n      axios.get(\"https://api.exchangeratesapi.io/latest?base=USD\").then(currencyResponse => {\n        setCurrency(currencyResponse.data.rates[country.currencies[0].code]);\n      });\n    }).catch(() => {\n      console.error(\"failure\");\n    });\n  }, [props.match.params.name]);\n\n  function handleChange(event) {\n    setConvert(event.target.value * currency);\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    axios.post(\"http://localhost:8000/comments/\", _objectSpread({}, formData, {\n      country: props.match.params.name\n    })).then(() => {\n      displayComments();\n    });\n  }\n\n  function makeTime(countryTime) {\n    var tempTime = countryTime.timezones[0];\n    var currentTime = getHours();\n    tempTime = tempTime.substr(4, 2);\n    tempTime = parseInt(tempTime);\n    tempTime = tempTime + 5;\n    temptTime = currentTime + tempTime;\n    setTime(tempTime);\n  }\n\n  console.log(\"check\", time);\n\n  function displayComments() {\n    axios.get(\"http://localhost:8000/comments/?countryId=\".concat(props.match.params.name)).then(res => {\n      setCommentsData(res.data.map(item => {\n        return React.createElement(\"div\", {\n          className: \"container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"card\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"card-header\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }, item.name), React.createElement(\"div\", {\n          className: \"card-body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, React.createElement(\"blockquote\", {\n          class: \"blockquote mb-0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, item.body)))));\n      }));\n    });\n  }\n\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, country ? React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, country.name), React.createElement(\"h3\", {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, \"$1 (USD) = \", currency, \" (\", country.currencies[0].code, \")\"), React.createElement(\"h2\", {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, \"Currency conversion\"), React.createElement(\"p\", {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, convert), React.createElement(\"form\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    onChange: handleChange,\n    className: \"form-control form-control-sm\",\n    placeholder: \"$$\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  })), React.createElement(\"h2\", {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, \"Discussion\"), React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    className: \"form-control form-control-sm\",\n    placeholder: \"Name\",\n    type: \"text\",\n    value: formData.name,\n    onChange: e => setFormData(_objectSpread({}, formData, {\n      name: e.target.value\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    className: \"form-control form-control-sm\",\n    placeholder: \"Comment\",\n    type: \"text\",\n    value: formData.comment,\n    onChange: e => setFormData(_objectSpread({}, formData, {\n      body: e.target.value\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"Submit\",\n    name: \"Submit\",\n    className: \"btn btn-dark\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  })))) : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \"loading\"), commentsData);\n}\n\nexport default CountryPage;","map":{"version":3,"sources":["/home/ich/Documents/programming/Travel Helper - TRACE PROJECT 3/traveltool/src/components/CountryPage.js"],"names":["React","useEffect","useState","axios","CountryPage","props","country","setCountry","currency","setCurrency","convert","setConvert","body","name","formData","setFormData","commentsData","setCommentsData","time","setTime","get","match","params","then","countryResponse","data","displayComments","makeTime","currencyResponse","rates","currencies","code","catch","console","error","handleChange","event","target","value","handleSubmit","preventDefault","post","countryTime","tempTime","timezones","currentTime","getHours","substr","parseInt","temptTime","log","res","map","item","e","comment"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\n\nfunction CountryPage(props) {\n    const [country, setCountry] = useState(null);\n    const [currency, setCurrency] = useState(null);\n    const [convert, setConvert] = useState(0);\n    const [formData, setFormData] = useState({body: '', name: ''});\n    const [commentsData, setCommentsData] = useState('loading..');\n    const [time, setTime] = useState('');\n\n    useEffect(() => {        \n        axios.get(`https://restcountries.eu/rest/v2/name/${props.match.params.name}`).then(countryResponse => {\n            const country = countryResponse.data[0];\n            setCountry(country);\n            displayComments();\n            makeTime(country);\n            axios.get(`https://api.exchangeratesapi.io/latest?base=USD`).then(currencyResponse => {\n                setCurrency(currencyResponse.data.rates[country.currencies[0].code])\n            })\n        }).catch(() => {\n            console.error(\"failure\");\n        });\n    }, [props.match.params.name]);\n\n    function handleChange(event) {\n        setConvert(event.target.value * currency);\n    }\n    \n    function handleSubmit(event) {\n        event.preventDefault();\n        axios.post(`http://localhost:8000/comments/`, {...formData, country:props.match.params.name})\n            .then(() => {\n                displayComments();\n            });\n    }\n \n    function makeTime(countryTime) {\n        var tempTime  = countryTime.timezones[0];\n        var currentTime = getHours()\n        tempTime = tempTime.substr(4,2);\n        tempTime = parseInt(tempTime);\n        tempTime = tempTime + 5; \n\n        temptTime = currentTime + tempTime;\n\n        setTime(tempTime);\n    }\n\n    console.log(\"check\", time);\n    \n    function displayComments() { \n        axios.get(`http://localhost:8000/comments/?countryId=${props.match.params.name}`).then(res => {\n            setCommentsData(res.data.map((item => {\n                return (\n                    <div className=\"container\">\n                        <div className=\"card\">\n                            <div class=\"card-header\">\n                                {item.name}\n                            </div>\n                            <div className=\"card-body\">\n                                <blockquote class=\"blockquote mb-0\">\n                                <p>{item.body}</p>\n                                </blockquote>\n                            </div>\n                        </div>\n                    </div>\n                )\n            })));\n        });\n    }\n\n    return (\n        <React.Fragment>\n            {country ? \n            <div>\n            <div className=\"container\">\n            <h1 className=\"text-center\">{country.name}</h1>\n            <h3 className=\"text-center\">$1 (USD) = {currency} ({country.currencies[0].code})</h3>\n            <h2 className=\"text-center\">Currency conversion</h2>\n            <p className=\"text-center\">{convert}</p>\n            <form><input type=\"text\" onChange={handleChange} className=\"form-control form-control-sm\" placeholder=\"$$\"/></form>\n            {/*<img src={country.flag} alt={country.name} styles=\"max-width: 100px; max-height: 50px;\"></img>*/}\n            <h2 className=\"text-center\">Discussion</h2>\n            <form onSubmit={handleSubmit}>\n                <input className=\"form-control form-control-sm\" placeholder=\"Name\" type=\"text\" \n                value={formData.name} onChange={(e) => setFormData({...formData, name:e.target.value })}/>\n                <input className=\"form-control form-control-sm\" placeholder=\"Comment\" type=\"text\" \n                value={formData.comment} onChange={(e) => setFormData({...formData, body:e.target.value })}/>\n                <input type=\"Submit\" name=\"Submit\" className=\"btn btn-dark\"/>\n            </form>\n            </div>\n            </div> \n        \n            : <div>loading</div>}\n            {commentsData}\n        </React.Fragment>\n    );\n}\n\n\n\nexport default CountryPage;"]},"metadata":{},"sourceType":"module"}